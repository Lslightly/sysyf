# SysYF IR Generator (Python && C++ Version)

## Project Structure

### Python

```
grammar
`-- sysyf.lark           # Grammar file (in lark)
src
|-- main.py
|-- sysyf_ast
|   |-- __init__.py
|   |-- ast.py           # AST Type Definition
|   |-- builder.py       # AST Builder (from parse tree)
|   |-- printer.py       # AST Printer (reconstruct code)
|   `-- visitor.py       # AST Visitor
|-- sysyf_ir
|   |-- __init__.py
|   `-- builder.py       # LLVM IR Builder
`-- sysyf_parser
    |-- __init__.py
    `-- sysyf_parser.py  # SysYF Parser (Automatically generated by lark)
```

### C++

```
grammar
`-- SysYF.g4             # Grammar file (in ANTLR4)
include
|-- ANTLRRuntime         # ANTLR4 C++ Runtime Headers
|-- AST                  # AST Type Definition && AST Printer && AST Builder
|-- IR                   # IR Definition && IR Builder && IR Printer
|-- Parser               # SysYF Parser (Automatically generated by ANTLR4)
`-- Support              # Some helper
src
|-- ANTLRRuntime         # ANTLR4 C++ Runtime Headers
|-- AST                  # AST Type Definition && AST Printer && AST Builder
|-- IR                   # IR Definition && IR Builder && IR Printer
|-- Parser               # SysYF Parser (Automatically generated by ANTLR4)
`-- main.cpp
```

## Run

### Python

```bash
usage: main.py [-h] [--emit-ir] [--emit-ast] [-o OUTPUT_FILE] input

SysYF IR Compiler

positional arguments:
  input           Input source file

options:
  -h, --help      show this help message and exit
  --emit-ir        Generate LLVM IR and print it
  --emit-ast       Print source code recovered from AST
  -o OUTPUT_FILE  Output file name
```

### C++

```bash
cd cpp
cmake -B build -G Ninja
cmake --build build
./build/compiler args...
```

## Test

```bash
usage: test.py [-h] {cpp,python} {Easy,Medium,Hard}

Test script

positional arguments:
  {cpp,python}        language
  {Easy,Medium,Hard}  Test Mode

options:
  -h, --help          show this help message and exit
```
